<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Maru.Type.Eval</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Maru-Type-Eval.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Maru.Type.Eval.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">zuramaru-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Maru.Type.Eval</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#section.orphans">Orphan instances</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Integrate types of extensible's Effect.</p><p><code><a href="Maru-Type-Eval.html#t:MaruMacro">MaruMacro</a></code> is evaluated by <code><a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a></code>.
 <code><a href="Maru-Type-Eval.html#t:MaruFunc">MaruFunc</a></code> is calculated by <code><a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a></code>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Fail">Fail</a> = <a href="Maru-Type-Eval.html#t:FailKey">FailKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:FailValue">FailValue</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:FailKey">FailKey</a> = &quot;fail&quot;</li><li class="src short"><span class="keyword">type</span> <a href="#t:FailValue">FailValue</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:EitherEff">EitherEff</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:FailAssociation">FailAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:FailKey">FailKey</a> <a href="Maru-Type-Eval.html#t:FailValue">FailValue</a></li><li class="src short"><a href="#v:throwFail">throwFail</a> :: <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs =&gt; <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a</li><li class="src short"><a href="#v:includeFail">includeFail</a> :: <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs =&gt; <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a</li><li class="src short"><a href="#v:includeFail-39-">includeFail'</a> :: <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs =&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a) -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a</li><li class="src short"><span class="keyword">type</span> <a href="#t:SimplificationSteps">SimplificationSteps</a> = [<a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a>]</li><li class="src short"><a href="#v:reportSteps">reportSteps</a> :: <a href="Maru-Type-Eval.html#t:SimplificationSteps">SimplificationSteps</a> -&gt; [<a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:SimplifSteps">SimplifSteps</a> = <a href="Maru-Type-Eval.html#t:SimplifStepsKey">SimplifStepsKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:SimplifStepsValue">SimplifStepsValue</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SimplifStepsKey">SimplifStepsKey</a> = &quot;simplifSteps&quot;</li><li class="src short"><span class="keyword">type</span> <a href="#t:SimplifStepsValue">SimplifStepsValue</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:WriterEff">WriterEff</a> <a href="Maru-Type-Eval.html#t:SimplificationSteps">SimplificationSteps</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SimplifStepsAssociation">SimplifStepsAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:SimplifStepsKey">SimplifStepsKey</a> <a href="Maru-Type-Eval.html#t:SimplifStepsValue">SimplifStepsValue</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruScopes">MaruScopes</a> = <a href="Maru-Type-Eval.html#t:MaruScopesKey">MaruScopesKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:MaruScopesValue">MaruScopesValue</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruScopesKey">MaruScopesKey</a> = &quot;maruScopes&quot;</li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruScopesValue">MaruScopesValue</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:State">State</a> <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruScopesAssociation">MaruScopesAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:MaruScopesKey">MaruScopesKey</a> <a href="Maru-Type-Eval.html#t:MaruScopesValue">MaruScopesValue</a></li><li class="src short"><a href="#v:insertGlobalVar">insertGlobalVar</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs ()</li><li class="src short"><a href="#v:newScope">newScope</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs ()</li><li class="src short"><a href="#v:popNewerScope">popNewerScope</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-Eval.html#t:MaruScope">MaruScope</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruEnv">MaruEnv</a> = <a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> <a href="Maru-Type-Eval.html#t:MaruScope">MaruScope</a></li><li class="src short"><a href="#v:getMaruEnv">getMaruEnv</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a></li><li class="src short"><a href="#v:putMaruEnv">putMaruEnv</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs ()</li><li class="src short"><a href="#v:modifyMaruEnv">modifyMaruEnv</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; (<a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a>) -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:IOEff">IOEff</a> = <a href="Maru-Type-Eval.html#t:IOEffKey">IOEffKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:IOEffValue">IOEffValue</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:IOEffKey">IOEffKey</a> = &quot;ioEff&quot;</li><li class="src short"><span class="keyword">type</span> <a href="#t:IOEffValue">IOEffValue</a> = <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:IOEffAssociation">IOEffAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:IOEffKey">IOEffKey</a> <a href="Maru-Type-Eval.html#t:IOEffValue">IOEffValue</a></li><li class="src short"><a href="#v:liftIOEff">liftIOEff</a> :: <a href="Maru-Type-Eval.html#t:IOEffAssociation">IOEffAssociation</a> xs =&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a</li><li class="src short"><span class="keyword">type</span> <a href="#t:ExceptionCause">ExceptionCause</a> = <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruEvaluator">MaruEvaluator</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> '[<a href="Maru-Type-Eval.html#t:Fail">Fail</a>, <a href="Maru-Type-Eval.html#t:MaruScopes">MaruScopes</a>, <a href="Maru-Type-Eval.html#t:SimplifSteps">SimplifSteps</a>, <a href="Maru-Type-Eval.html#t:IOEff">IOEff</a>]</li><li class="src short"><a href="#v:runMaruEvaluator">runMaruEvaluator</a> :: <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> a -&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a, <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a>, <a href="Maru-Type-Eval.html#t:SimplificationSteps">SimplificationSteps</a>)</li><li class="src short"><a href="#v:newSymbol">newSymbol</a> :: <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruScope">MaruScope</a> = <a href="../containers-0.5.7.1/Data-Map-Lazy.html#t:Map">Map</a> <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:MaruFunc">MaruFunc</a> = <a href="#v:MaruFunc">MaruFunc</a> {<ul class="subs"><li><a href="#v:execFunc">execFunc</a> :: [<a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a>] -&gt; <a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:MaruMacro">MaruMacro</a> = <a href="#v:MaruMacro">MaruMacro</a> {<ul class="subs"><li><a href="#v:execMacro">execMacro</a> :: <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li></ul>}</li><li class="src short"><a href="#v:lookup">lookup</a> :: <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li><li class="src short"><a href="#v:lookupVar">lookupVar</a> :: <span class="keyword">forall</span> xs. (<a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs, <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs) =&gt; <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li><li class="src short"><a href="#v:-94--36-">(^$)</a> :: (<a href="../base-4.9.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> s, <a href="../base-4.9.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> a) =&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> s -&gt; <a href="../lens-4.15.4/Control-Lens-Getter.html#t:Getting">Getting</a> (<a href="../base-4.9.1.0/Data-Monoid.html#t:First">First</a> a) s a -&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:MaruCalculator">MaruCalculator</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> '[<a href="Maru-Type-Eval.html#t:Fail">Fail</a>]</li><li class="src short"><a href="#v:runMaruCalculator">runMaruCalculator</a> :: <a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a> a -&gt; <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:First-39-">First'</a> a = <a href="#v:First-39-">First'</a> {<ul class="subs"><li><a href="#v:getFirst-39-">getFirst'</a> :: <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a</li></ul>}</li><li class="src short"><a href="#v:first-39-">first'</a> :: <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a</li><li class="src short"><a href="#v:expandVars">expandVars</a> :: (<a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs, <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs) =&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li><li class="src short"><a href="#v:substituteVar">substituteVar</a> :: <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Fail" class="def">Fail</a> = <a href="Maru-Type-Eval.html#t:FailKey">FailKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:FailValue">FailValue</a> <a href="src/Maru.Type.Eval.html#Fail" class="link">Source</a> <a href="#t:Fail" class="selflink">#</a></p><div class="doc"><p>An effect of <code>MaruEvaluator</code>.
 A possible of the failure.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FailKey" class="def">FailKey</a> = &quot;fail&quot; <a href="src/Maru.Type.Eval.html#FailKey" class="link">Source</a> <a href="#t:FailKey" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FailValue" class="def">FailValue</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:EitherEff">EitherEff</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> <a href="src/Maru.Type.Eval.html#FailValue" class="link">Source</a> <a href="#t:FailValue" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FailAssociation" class="def">FailAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:FailKey">FailKey</a> <a href="Maru-Type-Eval.html#t:FailValue">FailValue</a> <a href="src/Maru.Type.Eval.html#FailAssociation" class="link">Source</a> <a href="#t:FailAssociation" class="selflink">#</a></p><div class="doc"><p><code><a href="Maru-Type-Eval.html#t:Fail">Fail</a></code>'s <code><a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a></code></p></div></div><div class="top"><p class="src"><a id="v:throwFail" class="def">throwFail</a> :: <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs =&gt; <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a <a href="src/Maru.Type.Eval.html#throwFail" class="link">Source</a> <a href="#v:throwFail" class="selflink">#</a></p><div class="doc"><p><code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#v:throwEff">throwEff</a></code> for <code><a href="Maru-Type-Eval.html#t:Fail">Fail</a></code></p></div></div><div class="top"><p class="src"><a id="v:includeFail" class="def">includeFail</a> :: <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs =&gt; <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a <a href="src/Maru.Type.Eval.html#includeFail" class="link">Source</a> <a href="#v:includeFail" class="selflink">#</a></p><div class="doc"><p>Include <code><a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code> to <code><a href="Maru-Type-Eval.html#t:Fail">Fail</a></code> context.
 If it is Nothing,
 the whole of `Fail a` to be failed.</p></div></div><div class="top"><p class="src"><a id="v:includeFail-39-" class="def">includeFail'</a> :: <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs =&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a) -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a <a href="src/Maru.Type.Eval.html#includeFail%27" class="link">Source</a> <a href="#v:includeFail-39-" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Maru-Type-Eval.html#v:includeFail">includeFail</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimplificationSteps" class="def">SimplificationSteps</a> = [<a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a>] <a href="src/Maru.Type.Eval.html#SimplificationSteps" class="link">Source</a> <a href="#t:SimplificationSteps" class="selflink">#</a></p><div class="doc"><p>A log for &#31777;&#32004;s</p></div></div><div class="top"><p class="src"><a id="v:reportSteps" class="def">reportSteps</a> :: <a href="Maru-Type-Eval.html#t:SimplificationSteps">SimplificationSteps</a> -&gt; [<a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a>] <a href="src/Maru.Type.Eval.html#reportSteps" class="link">Source</a> <a href="#v:reportSteps" class="selflink">#</a></p><div class="doc"><p>Append numbers to steps</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Maru.Type.SExpr
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>reportSteps [Cons (AtomInt 1) (Cons (AtomInt 2) Nil), Cons (AtomInt 2) Nil]
</code></strong>[&quot;1: (1 2)&quot;,&quot;2: (2)&quot;]
</pre></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimplifSteps" class="def">SimplifSteps</a> = <a href="Maru-Type-Eval.html#t:SimplifStepsKey">SimplifStepsKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:SimplifStepsValue">SimplifStepsValue</a> <a href="src/Maru.Type.Eval.html#SimplifSteps" class="link">Source</a> <a href="#t:SimplifSteps" class="selflink">#</a></p><div class="doc"><p>An effect of <code>MaruEvaluator</code>, for logging simplifications</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimplifStepsKey" class="def">SimplifStepsKey</a> = &quot;simplifSteps&quot; <a href="src/Maru.Type.Eval.html#SimplifStepsKey" class="link">Source</a> <a href="#t:SimplifStepsKey" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimplifStepsValue" class="def">SimplifStepsValue</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:WriterEff">WriterEff</a> <a href="Maru-Type-Eval.html#t:SimplificationSteps">SimplificationSteps</a> <a href="src/Maru.Type.Eval.html#SimplifStepsValue" class="link">Source</a> <a href="#t:SimplifStepsValue" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimplifStepsAssociation" class="def">SimplifStepsAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:SimplifStepsKey">SimplifStepsKey</a> <a href="Maru-Type-Eval.html#t:SimplifStepsValue">SimplifStepsValue</a> <a href="src/Maru.Type.Eval.html#SimplifStepsAssociation" class="link">Source</a> <a href="#t:SimplifStepsAssociation" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruScopes" class="def">MaruScopes</a> = <a href="Maru-Type-Eval.html#t:MaruScopesKey">MaruScopesKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:MaruScopesValue">MaruScopesValue</a> <a href="src/Maru.Type.Eval.html#MaruScopes" class="link">Source</a> <a href="#t:MaruScopes" class="selflink">#</a></p><div class="doc"><p>An effect of <code>MaruEvaluator</code>.
 This is a stack for the lexical scope.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruScopesKey" class="def">MaruScopesKey</a> = &quot;maruScopes&quot; <a href="src/Maru.Type.Eval.html#MaruScopesKey" class="link">Source</a> <a href="#t:MaruScopesKey" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruScopesValue" class="def">MaruScopesValue</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:State">State</a> <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> <a href="src/Maru.Type.Eval.html#MaruScopesValue" class="link">Source</a> <a href="#t:MaruScopesValue" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruScopesAssociation" class="def">MaruScopesAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:MaruScopesKey">MaruScopesKey</a> <a href="Maru-Type-Eval.html#t:MaruScopesValue">MaruScopesValue</a> <a href="src/Maru.Type.Eval.html#MaruScopesAssociation" class="link">Source</a> <a href="#t:MaruScopesAssociation" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:insertGlobalVar" class="def">insertGlobalVar</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs () <a href="src/Maru.Type.Eval.html#insertGlobalVar" class="link">Source</a> <a href="#v:insertGlobalVar" class="selflink">#</a></p><div class="doc"><p>Insert a variable to the toplevel scope</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(_, env, _) &lt;- flip runMaruEvaluator E.initialEnv $ insertGlobalVar &quot;x&quot; (AtomInt 10)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>lookup &quot;x&quot; env
</code></strong>Just (AtomInt 10)
</pre></div></div><div class="top"><p class="src"><a id="v:newScope" class="def">newScope</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs () <a href="src/Maru.Type.Eval.html#newScope" class="link">Source</a> <a href="#v:newScope" class="selflink">#</a></p><div class="doc"><p>Make a scope in the state, with a variable.</p><p>NOTE:
 The scope must be created with one or more variables.
 It keeps any safety.</p><p>e.g.
   1. unintended empty scope is never created
   2. high affinity of <code><a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a></code> (<code><a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a></code>)  is kept</p></div></div><div class="top"><p class="src"><a id="v:popNewerScope" class="def">popNewerScope</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-Eval.html#t:MaruScope">MaruScope</a> <a href="src/Maru.Type.Eval.html#popNewerScope" class="link">Source</a> <a href="#v:popNewerScope" class="selflink">#</a></p><div class="doc"><p>Remove the newest scope (about the newest scope is written in <code><a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a></code>),
 and Return removed scope</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruEnv" class="def">MaruEnv</a> = <a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> <a href="Maru-Type-Eval.html#t:MaruScope">MaruScope</a> <a href="src/Maru.Type.Eval.html#MaruEnv" class="link">Source</a> <a href="#t:MaruEnv" class="selflink">#</a></p><div class="doc"><p>The whole of the runtime state.
 This is <code><a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a></code>, because the global scope is defined with the program startup</p><p>and</p><p>'getMaruEnv &gt;&gt;= return . last' is the toplevel (and this is used as global scope).
 'getMaruEnv &gt;&gt;= return . head' is the newest scope.</p><p>( This means the cons operation makes a new scope, it is not '++ [x]'.
   Please see <code>makeScope</code>.
 )</p></div></div><div class="top"><p class="src"><a id="v:getMaruEnv" class="def">getMaruEnv</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> <a href="src/Maru.Type.Eval.html#getMaruEnv" class="link">Source</a> <a href="#v:getMaruEnv" class="selflink">#</a></p><div class="doc"><p><code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#v:getEff">getEff</a></code> for <code><a href="Maru-Type-Eval.html#t:MaruScopes">MaruScopes</a></code></p></div></div><div class="top"><p class="src"><a id="v:putMaruEnv" class="def">putMaruEnv</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs () <a href="src/Maru.Type.Eval.html#putMaruEnv" class="link">Source</a> <a href="#v:putMaruEnv" class="selflink">#</a></p><div class="doc"><p><code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#v:putEff">putEff</a></code> for <code><a href="Maru-Type-Eval.html#t:MaruScopes">MaruScopes</a></code></p></div></div><div class="top"><p class="src"><a id="v:modifyMaruEnv" class="def">modifyMaruEnv</a> :: <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs =&gt; (<a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a>) -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs () <a href="src/Maru.Type.Eval.html#modifyMaruEnv" class="link">Source</a> <a href="#v:modifyMaruEnv" class="selflink">#</a></p><div class="doc"><p><code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#v:modifyEff">modifyEff</a></code> for <code>maruScopes</code></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IOEff" class="def">IOEff</a> = <a href="Maru-Type-Eval.html#t:IOEffKey">IOEffKey</a> <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:-62-:">&gt;:</a> <a href="Maru-Type-Eval.html#t:IOEffValue">IOEffValue</a> <a href="src/Maru.Type.Eval.html#IOEff" class="link">Source</a> <a href="#t:IOEff" class="selflink">#</a></p><div class="doc"><p>An effect of <code>MaruEvaluator</code>, this is same as <code><a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a></code> in <code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IOEffKey" class="def">IOEffKey</a> = &quot;ioEff&quot; <a href="src/Maru.Type.Eval.html#IOEffKey" class="link">Source</a> <a href="#t:IOEffKey" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IOEffValue" class="def">IOEffValue</a> = <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="src/Maru.Type.Eval.html#IOEffValue" class="link">Source</a> <a href="#t:IOEffValue" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IOEffAssociation" class="def">IOEffAssociation</a> = <a href="../extensible-0.4.4/Data-Extensible-Internal.html#t:Associate">Associate</a> <a href="Maru-Type-Eval.html#t:IOEffKey">IOEffKey</a> <a href="Maru-Type-Eval.html#t:IOEffValue">IOEffValue</a> <a href="src/Maru.Type.Eval.html#IOEffAssociation" class="link">Source</a> <a href="#t:IOEffAssociation" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:liftIOEff" class="def">liftIOEff</a> :: <a href="Maru-Type-Eval.html#t:IOEffAssociation">IOEffAssociation</a> xs =&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs a <a href="src/Maru.Type.Eval.html#liftIOEff" class="link">Source</a> <a href="#v:liftIOEff" class="selflink">#</a></p><div class="doc"><p><code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#v:liftEff">liftEff</a></code> for <code><a href="Maru-Type-Eval.html#t:IOEff">IOEff</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ExceptionCause" class="def">ExceptionCause</a> = <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a> <a href="src/Maru.Type.Eval.html#ExceptionCause" class="link">Source</a> <a href="#t:ExceptionCause" class="selflink">#</a></p><div class="doc"><p>A message of <code>Fail</code></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruEvaluator" class="def">MaruEvaluator</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> '[<a href="Maru-Type-Eval.html#t:Fail">Fail</a>, <a href="Maru-Type-Eval.html#t:MaruScopes">MaruScopes</a>, <a href="Maru-Type-Eval.html#t:SimplifSteps">SimplifSteps</a>, <a href="Maru-Type-Eval.html#t:IOEff">IOEff</a>] <a href="src/Maru.Type.Eval.html#MaruEvaluator" class="link">Source</a> <a href="#t:MaruEvaluator" class="selflink">#</a></p><div class="doc"><p>A monad for evaluating a maru's program</p></div></div><div class="top"><p class="src"><a id="v:runMaruEvaluator" class="def">runMaruEvaluator</a> :: <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> a -&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a, <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a>, <a href="Maru-Type-Eval.html#t:SimplificationSteps">SimplificationSteps</a>) <a href="src/Maru.Type.Eval.html#runMaruEvaluator" class="link">Source</a> <a href="#v:runMaruEvaluator" class="selflink">#</a></p><div class="doc"><p>Run an evaluation of <code>MaruEvaluator a</code></p></div></div><div class="top"><p class="src"><a id="v:newSymbol" class="def">newSymbol</a> :: <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> <a href="src/Maru.Type.Eval.html#newSymbol" class="link">Source</a> <a href="#v:newSymbol" class="selflink">#</a></p><div class="doc"><p>Create a symbol of the variable name,
 it is unique (is not duplicated) in the runtime.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruScope" class="def">MaruScope</a> = <a href="../containers-0.5.7.1/Data-Map-Lazy.html#t:Map">Map</a> <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> <a href="src/Maru.Type.Eval.html#MaruScope" class="link">Source</a> <a href="#t:MaruScope" class="selflink">#</a></p><div class="doc"><p>The runtime state.
 This associates the variable name and the value.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:MaruFunc" class="def">MaruFunc</a> <a href="src/Maru.Type.Eval.html#MaruFunc" class="link">Source</a> <a href="#t:MaruFunc" class="selflink">#</a></p><div class="doc"><p>A function of maru.
 This keeps the purity, don't happen effects.</p><p>Take [<code><a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></code>] as arguments, its length is checked by each function.
 If it is not the expected length, <code><a href="../base-4.9.1.0/Data-Maybe.html#v:Nothing">Nothing</a></code> maybe given.</p><p>Notice:</p><p>The function is Haskell's function, is represented by Haskell.
 The function is not maru's (runtime's) function (cannot be defined in the runtime).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MaruFunc" class="def">MaruFunc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:execFunc" class="def">execFunc</a> :: [<a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a>] -&gt; <a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:MaruMacro" class="def">MaruMacro</a> <a href="src/Maru.Type.Eval.html#MaruMacro" class="link">Source</a> <a href="#t:MaruMacro" class="selflink">#</a></p><div class="doc"><p>A macro of maru,
 this means the impure function.</p><p>Similar to <code><a href="Maru-Type-Eval.html#t:MaruFunc">MaruFunc</a></code>,
 but this is possibility to update the state of the environment.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MaruMacro" class="def">MaruMacro</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:execMacro" class="def">execMacro</a> :: <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEnv">MaruEnv</a> -&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> <a href="src/Maru.Type.Eval.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>Find a variable from the whole of the runtime environment with a symbol</p></div></div><div class="top"><p class="src"><a id="v:lookupVar" class="def">lookupVar</a> :: <span class="keyword">forall</span> xs. (<a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs, <a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs) =&gt; <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> <a href="src/Maru.Type.Eval.html#lookupVar" class="link">Source</a> <a href="#v:lookupVar" class="selflink">#</a></p><div class="doc"><p>Take a variable from <code><a href="Maru-Type-Eval.html#t:MaruScopes">MaruScopes</a></code> effect.
 If <code>sym</code> is not exists, the whole of this <code><a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a></code> to be failed</p></div></div><div class="top"><p class="src"><a id="v:-94--36-" class="def">(^$)</a> :: (<a href="../base-4.9.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> s, <a href="../base-4.9.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> a) =&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> s -&gt; <a href="../lens-4.15.4/Control-Lens-Getter.html#t:Getting">Getting</a> (<a href="../base-4.9.1.0/Data-Monoid.html#t:First">First</a> a) s a -&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> a <a href="src/Maru.Type.Eval.html#%5E%24" class="link">Source</a> <a href="#v:-94--36-" class="selflink">#</a></p><div class="doc"><p>This is like <code><a href="../lens-4.15.4/Control-Lens-Type.html#t:Prism">Prism</a></code>'s accessor,
 but don't return result as <code><a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code>.</p><p>Similar to 'x <a href="&amp;">&amp;</a> review f' but Nothing is included as a failure of the whole of <code><a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a></code>.</p><p><code><a href="../base-4.9.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a></code> for the error message.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MaruCalculator" class="def">MaruCalculator</a> = <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> '[<a href="Maru-Type-Eval.html#t:Fail">Fail</a>] <a href="src/Maru.Type.Eval.html#MaruCalculator" class="link">Source</a> <a href="#t:MaruCalculator" class="selflink">#</a></p><div class="doc"><p>This has effects of the part of <code><a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a></code>.
 Calculate pure functions.</p></div></div><div class="top"><p class="src"><a id="v:runMaruCalculator" class="def">runMaruCalculator</a> :: <a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a> a -&gt; <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a <a href="src/Maru.Type.Eval.html#runMaruCalculator" class="link">Source</a> <a href="#v:runMaruCalculator" class="selflink">#</a></p><div class="doc"><p>Extract the pure calculation from <code><a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:First-39-" class="def">First'</a> a <a href="src/Maru.Type.Eval.html#First%27" class="link">Source</a> <a href="#t:First-39-" class="selflink">#</a></p><div class="doc"><p>Simular to <code><a href="../base-4.9.1.0/Data-Monoid.html#t:First">First</a></code>, but using '<code><a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a></code> <code><a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a></code>' instead of <code><a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:First-39-" class="def">First'</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getFirst-39-" class="def">getFirst'</a> :: <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="Maru-Type-Eval.html#t:ExceptionCause">ExceptionCause</a> a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:First-39-" class="caption collapser" onclick="toggleSection('i:First-39-')">Instances</p><div id="section.i:First-39-" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:First-39-:Functor:1" class="instance expander" onclick="toggleSection('i:id:First-39-:Functor:1')"></span> <a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> <a href="Maru-Type-Eval.html#t:First-39-">First'</a></span> <a href="src/Maru.Type.Eval.html#line-309" class="link">Source</a> <a href="#t:First-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:First-39-:Functor:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> b -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:First-39-:Monoid:2" class="instance expander" onclick="toggleSection('i:id:First-39-:Monoid:2')"></span> <a href="../base-4.9.1.0/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Maru-Type-Eval.html#t:First-39-">First'</a> a)</span> <a href="src/Maru.Type.Eval.html#line-311" class="link">Source</a> <a href="#t:First-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:First-39-:Monoid:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Maru-Type-Eval.html#t:First-39-">First'</a> a] -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a <a href="#v:mconcat" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:first-39-" class="def">first'</a> :: <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="Maru-Type-Eval.html#t:First-39-">First'</a> a <a href="src/Maru.Type.Eval.html#first%27" class="link">Source</a> <a href="#v:first-39-" class="selflink">#</a></p><div class="doc"><p>Like a consturctor, but from '<code><a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code> a'.
 If <code><a href="../base-4.9.1.0/Data-Maybe.html#v:Nothing">Nothing</a></code> is given, return <code><a href="../base-4.9.1.0/Data-Monoid.html#v:mempty">mempty</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:expandVars" class="def">expandVars</a> :: (<a href="Maru-Type-Eval.html#t:MaruScopesAssociation">MaruScopesAssociation</a> xs, <a href="Maru-Type-Eval.html#t:FailAssociation">FailAssociation</a> xs) =&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="../extensible-0.4.4/Data-Extensible-Effect.html#t:Eff">Eff</a> xs <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> <a href="src/Maru.Type.Eval.html#expandVars" class="link">Source</a> <a href="#v:expandVars" class="selflink">#</a></p><div class="doc"><p>Expand the value of the variables, but these are not evaluated.</p><p>And +, -, *, and / are not expanded
 (because it is regarded as like the axioms)</p><p>simply expanding</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(sexpr, _, _) &lt;- flip runMaruEvaluator E.initialEnv $ newScope &quot;x&quot; (AtomInt 10) &gt;&gt; expandVars (AtomSymbol &quot;x&quot;)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sexpr
</code></strong>Right (AtomInt 10)
</pre><p>multi variables</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(sexpr, _, _) &lt;- flip runMaruEvaluator E.initialEnv $ newScope &quot;x&quot; (AtomInt 10) &gt;&gt; newScope &quot;y&quot; (AtomBool True) &gt;&gt; expandVars (Cons (AtomSymbol &quot;x&quot;) (Cons (AtomSymbol &quot;y&quot;) Nil))
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sexpr
</code></strong>Right (Cons (AtomInt 10) (Cons (AtomBool True) Nil))
</pre><p>nested expanding</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(sexpr, _, _) &lt;- flip runMaruEvaluator E.initialEnv $ newScope &quot;x&quot; (AtomInt 10) &gt;&gt; newScope &quot;y&quot; (AtomSymbol &quot;x&quot;) &gt;&gt; expandVars (AtomSymbol &quot;y&quot;)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sexpr
</code></strong>Right (AtomInt 10)
</pre></div></div><div class="top"><p class="src"><a id="v:substituteVar" class="def">substituteVar</a> :: <a href="Maru-Type-SExpr.html#t:MaruSymbol">MaruSymbol</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> -&gt; <a href="Maru-Type-SExpr.html#t:SExpr">SExpr</a> <a href="src/Maru.Type.Eval.html#substituteVar" class="link">Source</a> <a href="#v:substituteVar" class="selflink">#</a></p><div class="doc"><p>Substitute a value to a variable.</p><p>&quot;x&quot; is substituted by `AtomInt 10` in `Cons (AtomInt 1) (Cons (AtomSymbol &quot;x&quot;) Nil)`.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>substituteVar &quot;x&quot; (AtomInt 10) $ Cons (AtomInt 1) (Cons (AtomSymbol &quot;x&quot;) Nil)
</code></strong>Cons (AtomInt 1) (Cons (AtomInt 10) Nil)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>substituteVar &quot;x&quot; (AtomInt 10) $ Cons (AtomSymbol &quot;x&quot;) (Cons (AtomSymbol &quot;x&quot;) Nil)
</code></strong>Cons (AtomInt 10) (Cons (AtomInt 10) Nil)
</pre></div></div><h1>Orphan instances</h1><div id="section.orphans" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:MonadFail:MonadFail:1" class="instance expander" onclick="toggleSection('i:o:ic:MonadFail:MonadFail:1')"></span> <a href="../base-4.9.1.0/Control-Monad-Fail.html#t:MonadFail">MonadFail</a> <a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a></span> <a href="src/Maru.Type.Eval.html#line-298" class="link">Source</a> <a href="#v:-36-fMonadFailSkeleton" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:o:ic:MonadFail:MonadFail:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fail">fail</a> :: <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruCalculator">MaruCalculator</a> a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:MonadFail:MonadFail:2" class="instance expander" onclick="toggleSection('i:o:ic:MonadFail:MonadFail:2')"></span> <a href="../base-4.9.1.0/Control-Monad-Fail.html#t:MonadFail">MonadFail</a> <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a></span> <a href="src/Maru.Type.Eval.html#line-249" class="link">Source</a> <a href="#v:-36-fMonadFailSkeleton0" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:o:ic:MonadFail:MonadFail:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fail">fail</a> :: <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Maru-Type-Eval.html#t:MaruEvaluator">MaruEvaluator</a> a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>